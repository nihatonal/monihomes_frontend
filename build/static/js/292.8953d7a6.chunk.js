"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[292],{6293:(e,t,a)=>{a.d(t,{Z:()=>d});var s=a(2791),n=a(2426),i=a.n(n),l=(a(3333),a(6892)),r=(a(830),a(9508)),c=a(6856),o=(a(6896),a(184));const d=function(e){const{sendRequest:t}=(0,r.x)(),[a,n]=(0,s.useState)([]),[d,u]=(0,s.useState)([]),[p,m]=(0,s.useState)([]),[f,h]=(0,s.useState)([]);function v(e,t){let a=[],s=i()(new Date(e)),n=i()(new Date(t));for(;s<=n;)a.push(i()(new Date(s)).format("YYYY/MM/DD")),s=i()(new Date(s)).add(1,"days");return a}(0,s.useEffect)((()=>{(async()=>{try{const a=await t("https://monihomesbackend.onrender.com/api/getprices");u(a.prices["room"===e.filter?0:1].price)}catch(a){}})()}),[t,e.filter]);const[_,x]=(0,s.useState)(Y());function Y(){const{innerWidth:e,innerHeight:t}=window;return{innerWidth:e,innerHeight:t}}function D(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0}(0,s.useEffect)((()=>{function e(){x(Y())}return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,s.useEffect)((()=>{let t;v(e.selectedStart,e.selectedEnd).length,t=v(e.selectedStart,e.selectedEnd),n(t)}),[e.selectedStart,e.selectedEnd]),(0,s.useEffect)((()=>{const t=[...new Set([].concat(e.events&&e.events.map((e=>v(e.start.date,e.end.date).slice(0,-1)))))].flat(),a=[...t.reduce(((e,t)=>e.set(t,(e.get(t)||0)+1)),new Map).entries()].filter((e=>e[1]>2)).sort(D).flat().filter((e=>3!==e));h("room"===e.filter?a:t)}),[e.events,e.filter]);let j=[0];for(let s=0;s<f.length;s++)(s+1>=f.length||i()(new Date(f[s])).add(1,"days").format("YYYY/MM/DD")!==i()(new Date(f[s+1])).format("YYYY/MM/DD"))&&j.push(s+1);(0,s.useEffect)((()=>{let e=0;const t=f.reduce(((t,a,s)=>(s>=j[e]&&(t.push([]),++e),t[t.length-1].push(f[s]),t)),[]);m(t)}),[f]);let N=p.map((e=>e[0])),w=p.map((e=>e[e.length-1])),g=f.filter((e=>!N.concat(w).includes(e)));return(0,o.jsx)("div",{className:"calendar-modal",style:e.style,ref:e.ref,children:(0,o.jsx)("div",{className:"calendar-modal-wrapper",children:(0,o.jsx)(l.ZP,{value:e.value,locale:e.lang,nextLabel:(0,o.jsx)(c.Djl,{className:"calendar-arrow"}),prevLabel:(0,o.jsx)(c.oTp,{className:"calendar-arrow"}),selectRange:!1,showDoubleView:_.innerWidth>768,showNavigation:!0,showNeighboringMonth:!1,showFixedNumberOfWeeks:!1,allowPartialRange:!1,tileClassName:t=>{let{date:s,view:n}=t;return i()(s).format("YYYY/MM/DD")<i()().format("YYYY/MM/DD")?"passed":e.guests?i()(s).format("YYYY/MM/DD")<i()().format("YYYY/MM/DD")?"passed":a.slice(0,-1).filter((e=>w.includes(e))).filter((e=>!g.concat(w.filter((e=>N.includes(e)))).includes(e))).find((e=>e===i()(s).format("YYYY/MM/DD")))?"selected-check-in":a.slice(1).filter((e=>N.includes(e))).filter((e=>!g.concat(w.filter((e=>N.includes(e)))).includes(e))).find((e=>e===i()(s).format("YYYY/MM/DD")))?"selected-check-out":a[0]!==i()(s).format("YYYY/MM/DD")||N.includes(a[0])||g.includes(a[0])?a[a.length-1]!==i()(s).format("YYYY/MM/DD")||g.includes(a[a.length-1])?N.filter((e=>!w.includes(e))).find((e=>e===i()(s).format("YYYY/MM/DD")))?"reserved_check-in":w.filter((e=>!N.includes(e))).find((e=>e===i()(s).format("YYYY/MM/DD")))?"reserved_check-out":g.concat(w.filter((e=>N.includes(e)))).find((e=>e===i()(s).format("YYYY/MM/DD")))?"reserved":a.slice(1,-1).filter((e=>!g.includes(e))).find((e=>e===i()(s).format("YYYY/MM/DD")))?"selected":void 0:"selected-check-out-null":"selected-check-in-null":void 0},tileContent:e=>{let{date:t,view:a}=e;return d.map((e=>e.date===i()(t).format("YYYY/MM/DD")?(0,o.jsxs)("p",{children:["*"===e.price?" ":e.price+"\u20ba"," "]},e.date):null))}})})})}},5864:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(2791),n=a(1595),i=a(184);const l=(e,t)=>{switch(t.type){case"CHANGE":return{...e,value:t.val,isValid:(0,n.Gu)(t.val,t.validators)};case"TOUCH":return{...e,isTouched:!0};default:return e}},r=e=>{const[t,a]=(0,s.useReducer)(l,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),{id:n,onInput:r}=e,{value:c,isValid:o}=t;(0,s.useEffect)((()=>{r(n,c,o)}),[n,c,o,r]);const d=t=>{a({type:"CHANGE",val:t.target.value,validators:e.validators})},u=()=>{a({type:"TOUCH"})},p="input"===e.element?(0,i.jsx)("input",{id:e.id,type:e.type,onChange:d,onBlur:u,value:t.value,pattern:e.pattern,placeholder:e.placeholder}):(0,i.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:d,onBlur:u,placeholder:e.placeholder,value:t.value,style:e.style});return(0,i.jsxs)("div",{className:"form-control ".concat(!t.isValid&&t.isTouched&&"form-control--invalid"),children:[(0,i.jsx)("label",{htmlFor:e.id,children:e.label}),p,(0,i.jsx)("p",{className:""!==t.value||t.isTouched&&!t.isValid?"placeholder placeholder-touched":"placeholder",children:t.isTouched&&!t.isValid?e.error_Text:e.custom_placeholder})]})}},5094:(e,t,a)=>{a.d(t,{c:()=>i});var s=a(2791);const n=(e,t)=>{switch(t.type){case"INPUT_CHANGE":let a=!0;for(const s in e.inputs)e.inputs[s]&&(a=s===t.inputId?a&&t.isValid:a&&e.inputs[s].isValid);return{...e,inputs:{...e.inputs,[t.inputId]:{value:t.value,isValid:t.isValid}},isValid:a};case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},i=(e,t)=>{const[a,i]=(0,s.useReducer)(n,{inputs:e,isValid:t});return[a,(0,s.useCallback)(((e,t,a)=>{i({type:"INPUT_CHANGE",value:t,isValid:a,inputId:e})}),[]),(0,s.useCallback)(((e,t)=>{i({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]}},1595:(e,t,a)=>{a.d(t,{Gu:()=>_,eg:()=>v,hg:()=>h});const s="REQUIRE",n="MINLENGTH",i="MAXLENGTH",l="EXPIRATION",r="EMAIL",c="PHONES",o="NUMBER",d="STARTDATE",u="ENDDATE",p="CODE",m="PASSWORD",f="PASSWORD_CONFIRM",h=()=>({type:s}),v=()=>({type:m}),_=(e,t)=>{let a=!0;for(const h of t)h.type===s&&(a=a&&e.trim().length>0),h.type===n&&(a=a&&e.trim().length>=h.val),h.type===d&&(a=a&&e.trim().length>=h.val),h.type===u&&(a=a&&h.val2>h.val),h.type===i&&(a=a&&e.trim().length<=h.val),"MIN"===h.type&&(a=a&&+e>=h.val),h.type===c&&(a=a&&/[0-9]{10}$/.test(e)),h.type===l&&(a=a&&Number(e.slice(0,2))<=h.year&&Number(e.slice(-2))<=h.month),h.type===p&&(a=a&&/[0-9]{3}-[0-9]{3}$/.test(e)),h.type===r&&(a=a&&/^\S+@\S+\.\S+$/.test(e)),h.type===m&&(a=a&&/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]*$/.test(e)),h.type===o&&(a=a&&/^[0-9]*$/.test(e)),h.type===f&&(a=a&&e===h.val);return a}},1826:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var s=a(2791),n=(a(3333),a(9508)),i=a(3108),l=a(5097),r=a(2426),c=a.n(r),o=a(6892),d=(a(830),a(6856)),u=(a(6896),a(184));const p=function(e){function t(e,t){let a=[],s=c()(new Date(e)),n=c()(new Date(t));for(;s<=n;)a.push(c()(new Date(s)).format("YYYY/MM/DD")),s=c()(new Date(s)).add(1,"days");return a}const[a,n]=(0,s.useState)(i());function i(){const{innerWidth:e,innerHeight:t}=window;return{innerWidth:e,innerHeight:t}}(0,s.useEffect)((()=>{function e(){n(i())}return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const l=[...new Set([].concat(e.events&&e.events.map((a=>e.events&&t(a.start.date,a.end.date)[0]))).flat())],r=[...new Set([].concat(e.events&&e.events.map((a=>e.events&&t(a.start.date,a.end.date)[t(a.start.date,a.end.date).length-1]))).flat())],p=[...new Set([].concat(e.events&&e.events.map((a=>e.events&&t(a.start.date,a.end.date).slice(1,-1)))).flat())];return(0,u.jsx)("div",{className:"calendar-modal",style:e.style,ref:e.ref,children:(0,u.jsx)("div",{className:"calendar-modal-wrapper",children:(0,u.jsx)(o.ZP,{value:e.value,locale:e.lang,nextLabel:(0,u.jsx)(d.Djl,{className:"calendar-arrow"}),prevLabel:(0,u.jsx)(d.oTp,{className:"calendar-arrow"}),selectRange:!1,showDoubleView:a.innerWidth>768,showNavigation:!0,showNeighboringMonth:!1,showFixedNumberOfWeeks:!1,allowPartialRange:!1,tileClassName:t=>{let{date:a,view:s}=t;if(e.markDates)return l.filter((e=>!r.includes(e))).find((e=>e===c()(a).format("YYYY/MM/DD")))?"reserved_check-in":r.filter((e=>!l.includes(e))).find((e=>e===c()(a).format("YYYY/MM/DD")))?"reserved_check-out":p.concat(r.filter((e=>l.includes(e)))).find((e=>e===c()(a).format("YYYY/MM/DD")))?"reserved":void 0}})})})};var m=a(63);var f=a(5864),h=a(1595),v=a(5094),_=a(6293),x=a(2646);const Y=function(e){const{sendRequest:t}=(0,n.x)(),[a,i]=(0,s.useState)(!1),[l,r]=(0,s.useState)(""),[o,d]=(0,s.useState)([]),[p,Y]=(0,s.useState)([]),[D,j]=(0,s.useState)([]),[N,w]=(0,s.useState)(),[g,y]=(0,s.useState)(),[b,M]=(0,s.useState)(),[S,k]=(0,s.useState)([]),[C,E]=(0,v.c)({start_date:{value:"",isValid:!1},end_date:{value:"",isValid:!0},price:{value:"",isValid:!1}},!1);return(0,s.useEffect)((()=>{(async()=>{try{const e=await t("https://monihomesbackend.onrender.com/api/getprices");d(e.prices[N].price),M(e.prices[N]._id)}catch(e){}})()}),[t,a,N]),(0,s.useEffect)((()=>{const e=Object.values(o.reduce(((e,t)=>{let{date:a,price:s}=t;return e[s]||(e[s]={price:s,date:[]}),e[s].date.push(a),e}),{}));k(e)}),[o]),(0,s.useEffect)((()=>{j(function(e,t){let a=[],s=c()(new Date(e)),n=c()(new Date(t));for(;s<=n;)a.push(c()(new Date(s)).format("YYYY/MM/DD")),s=c()(new Date(s)).add(1,"days");return a}(C.inputs.start_date.value,C.inputs.end_date.value))}),[C.inputs.start_date.value,C.inputs.end_date.value]),(0,s.useEffect)((()=>{r(D.map((e=>({date:e,price:C.inputs.price.value}))))}),[C.inputs.price.value,D]),(0,s.useEffect)((()=>{const e=o.filter((e=>!D.includes(e.date)));Y(e)}),[C.inputs.price.value,D]),(0,u.jsxs)("div",{className:"add_guest_wrapper",style:{margin:"20px"},children:[(0,u.jsxs)("div",{className:"price_add_wrapper",children:[(0,u.jsxs)("div",{className:"filter_room",children:[(0,u.jsx)("button",{className:0===g?"filter_btn active_filter_btn":"filter_btn",onClick:e=>y(0),children:"Fiyat Listesi"}),(0,u.jsx)("button",{className:1===g?"filter_btn active_filter_btn":"filter_btn",onClick:e=>y(1),children:"Fiyat Kayd\u0131"})]}),1===g&&(0,u.jsxs)("div",{className:"filter_room",children:[(0,u.jsx)("button",{className:0===N?"filter_btn active_filter_btn":"filter_btn",onClick:e=>w(0),children:"Moni Homes"}),(0,u.jsx)("button",{className:1===N?"filter_btn active_filter_btn":"filter_btn",onClick:e=>w(1),children:"Villa Masal"})]}),(0,u.jsx)("div",{className:"price_content_wrapper",children:0===g?(0,u.jsxs)("div",{className:"price_content_item",children:[(0,u.jsx)("h3",{children:"Fiyat Listesi"}),(0,u.jsx)(x.Z,{data:S})]}):(0,u.jsxs)("div",{className:"price_content_item",children:[(0,u.jsx)("h3",{children:"Fiyat Kayd\u0131"}),(0,u.jsxs)("form",{className:"inputs_container",onSubmit:async e=>{e.preventDefault();const a=p.concat(l);console.log(a),i(!0),console.log(C.inputs.price.isValid);try{await t("https://monihomesbackend.onrender.com/api/saveprices","POST",JSON.stringify({price:a,id:b}),{"Content-Type":"application/json"});i(!1)}catch(s){}},children:[(0,u.jsx)(f.Z,{id:"start_date",element:"input",type:"date",label:"Start",placeholder:"Start Date of price",validators:[(0,h.hg)()],onInput:E}),(0,u.jsx)(f.Z,{id:"end_date",element:"input",type:"date",label:"End",placeholder:"End Date of price",validators:[(0,h.hg)()],onInput:E}),(0,u.jsx)(f.Z,{id:"price",element:"input",type:"text",label:"Price",placeholder:"Write the price",validators:[(0,h.hg)()],onInput:E}),(0,u.jsx)("button",{type:"submit",className:"save_btn",style:{marginTop:"20px"},disabled:!C.inputs.price.isValid,children:a?(0,u.jsx)(m.Z,{}):"Save"})]})]})})]}),(0,u.jsx)("div",{className:"availability__item_content",children:(0,u.jsx)(_.Z,{guests:[],filter:0===N?"room":"villamasal"})})]})};const D=function(e){return(0,u.jsxs)("div",{className:"select_container",children:[(0,u.jsx)("p",{className:"select",onClick:e.showOptions,children:"room1"===e.room?"Room 1":"room2"===e.room?"Room 2":"room3"===e.room?"Room 3":"Villa Masal"}),(0,u.jsxs)("ul",{className:"options_container",style:e.options?{display:"flex"}:{display:"none"},children:[(0,u.jsx)("li",{onClick:e.onClick,id:"room1",className:"options_item",children:"Room 1"}),(0,u.jsx)("li",{onClick:e.onClick,id:"room2",className:"options_item",children:"Room 2"}),(0,u.jsx)("li",{onClick:e.onClick,id:"room3",className:"options_item",children:"Room 3"}),(0,u.jsx)("li",{onClick:e.onClick,id:"villamasal",className:"options_item",children:"Villa Masal"})]})]})};const j=function(e){const t=(0,s.useContext)(i.V),{sendRequest:a}=(0,n.x)(),[r,c]=(0,s.useState)(),[o,d]=(0,s.useState)([]),[m,f]=(0,s.useState)("room1"),[h,v]=(0,s.useState)(!1),[_,x]=(0,s.useState)(""),[j,N]=(0,s.useState)([]),[w,g]=(0,s.useState)(2024),[y,b]=(0,s.useState)(""),[M,S]=(0,s.useState)(null);return(0,s.useEffect)((()=>{(async()=>{try{const e=await a("https://monihomesbackend.onrender.com/api/getdates");c(e.guests)}catch(e){}})()}),[a]),(0,s.useEffect)((()=>{(async()=>{try{const e=await a("https://monihomesbackend.onrender.com/api/google");S(e.data.items)}catch(e){}})()}),[a]),(0,s.useEffect)((()=>{d(r&&r.filter((e=>e.room===m)))}),[m,r]),(0,s.useEffect)((()=>{N(M&&M.filter((e=>e.summary.toLowerCase().includes(m))))}),[M,m]),(0,u.jsx)("div",{className:"user_container",children:(0,u.jsxs)("div",{className:"user_wrapper",children:[(0,u.jsx)("div",{className:"logout",children:(0,u.jsx)("button",{onClick:t.logout,children:"\xc7\u0131k\u0131\u015f"})}),(0,u.jsxs)("div",{className:"user_btns_container",children:[(0,u.jsx)("button",{onClick:()=>b("customer"),className:"user_btn",children:"M\xfc\u015fteri Kayd\u0131"}),(0,u.jsx)("button",{onClick:()=>b("price"),className:"user_btn",children:"Fiyat Kayd\u0131"})]}),"price"===y&&(0,u.jsx)(Y,{}),"customer"===y&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"select_room_wrapper",children:(0,u.jsx)(D,{onClick:e=>{f(e.target.id),v(!1)},room:m,showOptions:()=>v(!h),options:h})}),(0,u.jsx)(p,{markDates:o,events:j}),(0,u.jsx)(l.Z,{data:j.sort(((e,t)=>new Date(t.start.date)-new Date(e.start.date))),onDelete:e=>{e.preventDefault(),e.stopPropagation()},onChange:e=>{x(e.target.value)},onChangeYear:e=>{g(e.target.value)},years:w,value:_,filter:m,clearFilter:()=>x("")})]})]})})}},5097:(e,t,a)=>{a.d(t,{Z:()=>l});var s=a(2791),n=a(9126),i=a(184);const l=function(e){const[t,a]=(0,s.useState)(""),[l,r]=(0,s.useState)(!1);return(0,i.jsxs)("div",{className:"guest_table",children:[(0,i.jsxs)("div",{className:"guest_table_header",children:[(0,i.jsx)("p",{children:"No"}),(0,i.jsx)("p",{children:"Room Number"}),(0,i.jsx)("p",{children:"Check-in"}),(0,i.jsx)("p",{children:"Check-out"}),(0,i.jsx)("p",{className:"\r ",onClick:()=>r(!l),children:(0,i.jsx)(n.r0X,{})})]}),e.data&&e.data.map(((s,n)=>(0,i.jsx)("div",{className:"guest_table_",children:(0,i.jsxs)("div",{className:"guest_table_item",onClick:()=>{var e;a((e=n)===t?"":e)},style:t===n?{background:"#226450cf",color:"#fff"}:null,children:[(0,i.jsx)("p",{className:"guest_table_item_title",children:n+1}),(0,i.jsxs)("p",{className:"guest_table_item_title",children:[" ","room1"===e.filter?"Room 1":"room2"===e.filter?"Room 2":"room3"===e.filter?"Room 3":"Villa Masal"]}),(0,i.jsx)("p",{className:"guest_table_item_title",children:s.start.date}),(0,i.jsx)("p",{className:"guest_table_item_title",children:s.end.date})]})},s.id)))]})}},6896:()=>{}}]);
//# sourceMappingURL=292.8953d7a6.chunk.js.map