"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[292],{6293:(e,t,a)=>{a.d(t,{Z:()=>d});var s=a(2791),n=a(2426),l=a.n(n),i=(a(3333),a(6892)),r=(a(830),a(9508)),c=a(6856),o=(a(6896),a(184));const d=function(e){const{sendRequest:t}=(0,r.x)(),[a,n]=(0,s.useState)([]),[d,u]=(0,s.useState)([]),[p,m]=(0,s.useState)([]),[h,f]=(0,s.useState)([]);function v(e,t){let a=[],s=l()(new Date(e)),n=l()(new Date(t));for(;s<=n;)a.push(l()(new Date(s)).format("YYYY/MM/DD")),s=l()(new Date(s)).add(1,"days");return a}(0,s.useEffect)((()=>{(async()=>{try{const a=await t("https://monihomesbackend.onrender.com/api/getprices");u(a.prices["room"===e.filter?0:1].price)}catch(a){}})()}),[t,e.filter]);const[Y,g]=(0,s.useState)(x());function x(){const{innerWidth:e,innerHeight:t}=window;return{innerWidth:e,innerHeight:t}}function w(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0}(0,s.useEffect)((()=>{function e(){g(x())}return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,s.useEffect)((()=>{let t;v(e.selectedStart,e.selectedEnd).length,t=v(e.selectedStart,e.selectedEnd),n(t)}),[e.selectedStart,e.selectedEnd]),(0,s.useEffect)((()=>{const t=[...new Set([].concat(e.events&&e.events.map((e=>v(e.start.date,e.end.date).slice(0,-1)))))].flat(),a=[...t.reduce(((e,t)=>e.set(t,(e.get(t)||0)+1)),new Map).entries()].filter((e=>e[1]>2)).sort(w).flat().filter((e=>3!==e));f("room"===e.filter?a:t)}),[e.events,e.filter]);let D=[0];for(let s=0;s<h.length;s++)(s+1>=h.length||l()(new Date(h[s])).add(1,"days").format("YYYY/MM/DD")!==l()(new Date(h[s+1])).format("YYYY/MM/DD"))&&D.push(s+1);(0,s.useEffect)((()=>{let e=0;const t=h.reduce(((t,a,s)=>(s>=D[e]&&(t.push([]),++e),t[t.length-1].push(h[s]),t)),[]);m(t)}),[h]);let _=p.map((e=>e[0])),N=p.map((e=>e[e.length-1])),j=h.filter((e=>!_.concat(N).includes(e)));return(0,o.jsx)("div",{className:"calendar-modal",style:e.style,ref:e.ref,children:(0,o.jsx)("div",{className:"calendar-modal-wrapper",children:(0,o.jsx)(i.ZP,{value:e.value,locale:e.lang,nextLabel:(0,o.jsx)(c.Djl,{className:"calendar-arrow"}),prevLabel:(0,o.jsx)(c.oTp,{className:"calendar-arrow"}),selectRange:!1,showDoubleView:Y.innerWidth>768,showNavigation:!0,showNeighboringMonth:!1,showFixedNumberOfWeeks:!1,allowPartialRange:!1,tileClassName:t=>{let{date:s,view:n}=t;return l()(s).format("YYYY/MM/DD")<l()().format("YYYY/MM/DD")?"passed":e.guests?l()(s).format("YYYY/MM/DD")<l()().format("YYYY/MM/DD")?"passed":a.slice(0,-1).filter((e=>N.includes(e))).filter((e=>!j.concat(N.filter((e=>_.includes(e)))).includes(e))).find((e=>e===l()(s).format("YYYY/MM/DD")))?"selected-check-in":a.slice(1).filter((e=>_.includes(e))).filter((e=>!j.concat(N.filter((e=>_.includes(e)))).includes(e))).find((e=>e===l()(s).format("YYYY/MM/DD")))?"selected-check-out":a[0]!==l()(s).format("YYYY/MM/DD")||_.includes(a[0])||j.includes(a[0])?a[a.length-1]!==l()(s).format("YYYY/MM/DD")||j.includes(a[a.length-1])?_.filter((e=>!N.includes(e))).find((e=>e===l()(s).format("YYYY/MM/DD")))?"reserved_check-in":N.filter((e=>!_.includes(e))).find((e=>e===l()(s).format("YYYY/MM/DD")))?"reserved_check-out":j.concat(N.filter((e=>_.includes(e)))).find((e=>e===l()(s).format("YYYY/MM/DD")))?"reserved":a.slice(1,-1).filter((e=>!j.includes(e))).find((e=>e===l()(s).format("YYYY/MM/DD")))?"selected":void 0:"selected-check-out-null":"selected-check-in-null":void 0},tileContent:e=>{let{date:t,view:a}=e;return d.map((e=>e.date===l()(t).format("YYYY/MM/DD")?(0,o.jsxs)("p",{children:[e.price," \u20ba"]},e.date):null))}})})})}},5864:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(2791),n=a(1595),l=a(184);const i=(e,t)=>{switch(t.type){case"CHANGE":return{...e,value:t.val,isValid:(0,n.Gu)(t.val,t.validators)};case"TOUCH":return{...e,isTouched:!0};default:return e}},r=e=>{const[t,a]=(0,s.useReducer)(i,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),{id:n,onInput:r}=e,{value:c,isValid:o}=t;(0,s.useEffect)((()=>{r(n,c,o)}),[n,c,o,r]);const d=t=>{a({type:"CHANGE",val:t.target.value,validators:e.validators})},u=()=>{a({type:"TOUCH"})},p="input"===e.element?(0,l.jsx)("input",{id:e.id,type:e.type,onChange:d,onBlur:u,value:t.value,pattern:e.pattern,placeholder:e.placeholder}):(0,l.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:d,onBlur:u,placeholder:e.placeholder,value:t.value,style:e.style});return(0,l.jsxs)("div",{className:"form-control ".concat(!t.isValid&&t.isTouched&&"form-control--invalid"),children:[(0,l.jsx)("label",{htmlFor:e.id,children:e.label}),p,(0,l.jsx)("p",{className:""!==t.value||t.isTouched&&!t.isValid?"placeholder placeholder-touched":"placeholder",children:t.isTouched&&!t.isValid?e.error_Text:e.custom_placeholder})]})}},5094:(e,t,a)=>{a.d(t,{c:()=>l});var s=a(2791);const n=(e,t)=>{switch(t.type){case"INPUT_CHANGE":let a=!0;for(const s in e.inputs)e.inputs[s]&&(a=s===t.inputId?a&&t.isValid:a&&e.inputs[s].isValid);return{...e,inputs:{...e.inputs,[t.inputId]:{value:t.value,isValid:t.isValid}},isValid:a};case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},l=(e,t)=>{const[a,l]=(0,s.useReducer)(n,{inputs:e,isValid:t});return[a,(0,s.useCallback)(((e,t,a)=>{l({type:"INPUT_CHANGE",value:t,isValid:a,inputId:e})}),[]),(0,s.useCallback)(((e,t)=>{l({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]}},9508:(e,t,a)=>{a.d(t,{x:()=>n});var s=a(2791);const n=()=>{const[e,t]=(0,s.useState)(!1),[a,n]=(0,s.useState)(),l=(0,s.useRef)([]),i=(0,s.useCallback)((async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t(!0);const r=new AbortController;l.current.push(r);try{const n=await fetch(e,{method:a,body:s,headers:i,signal:r.signal}),c=await n.json();if(l.current=l.current.filter((e=>e!==r)),!n.ok)throw new Error(c.message);return t(!1),c}catch(c){throw n(c.message),t(!1),c}}),[]);return(0,s.useEffect)((()=>()=>{l.current.forEach((e=>e.abort()))}),[]),{isLoading:e,error:a,sendRequest:i,clearError:()=>{n(null)}}}},1595:(e,t,a)=>{a.d(t,{Gu:()=>Y,eg:()=>v,hg:()=>f});const s="REQUIRE",n="MINLENGTH",l="MAXLENGTH",i="EXPIRATION",r="EMAIL",c="PHONES",o="NUMBER",d="STARTDATE",u="ENDDATE",p="CODE",m="PASSWORD",h="PASSWORD_CONFIRM",f=()=>({type:s}),v=()=>({type:m}),Y=(e,t)=>{let a=!0;for(const f of t)f.type===s&&(a=a&&e.trim().length>0),f.type===n&&(a=a&&e.trim().length>=f.val),f.type===d&&(a=a&&e.trim().length>=f.val),f.type===u&&(a=a&&f.val2>f.val),f.type===l&&(a=a&&e.trim().length<=f.val),"MIN"===f.type&&(a=a&&+e>=f.val),f.type===c&&(a=a&&/[0-9]{10}$/.test(e)),f.type===i&&(a=a&&Number(e.slice(0,2))<=f.year&&Number(e.slice(-2))<=f.month),f.type===p&&(a=a&&/[0-9]{3}-[0-9]{3}$/.test(e)),f.type===r&&(a=a&&/^\S+@\S+\.\S+$/.test(e)),f.type===m&&(a=a&&/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]*$/.test(e)),f.type===o&&(a=a&&/^[0-9]*$/.test(e)),f.type===h&&(a=a&&e===f.val);return a}},1826:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var s=a(2791),n=(a(3333),a(9508)),l=a(3108),i=a(5097),r=a(2426),c=a.n(r),o=a(6892),d=(a(830),a(6856)),u=(a(6896),a(184));const p=function(e){function t(e,t){let a=[],s=c()(new Date(e)),n=c()(new Date(t));for(;s<=n;)a.push(c()(new Date(s)).format("YYYY/MM/DD")),s=c()(new Date(s)).add(1,"days");return a}const[a,n]=(0,s.useState)(l());function l(){const{innerWidth:e,innerHeight:t}=window;return{innerWidth:e,innerHeight:t}}(0,s.useEffect)((()=>{function e(){n(l())}return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const i=[...new Set([].concat(e.events&&e.events.map((a=>e.events&&t(a.start.date,a.end.date)[0]))).flat())],r=[...new Set([].concat(e.events&&e.events.map((a=>e.events&&t(a.start.date,a.end.date)[t(a.start.date,a.end.date).length-1]))).flat())],p=[...new Set([].concat(e.events&&e.events.map((a=>e.events&&t(a.start.date,a.end.date).slice(1,-1)))).flat())];return(0,u.jsx)("div",{className:"calendar-modal",style:e.style,ref:e.ref,children:(0,u.jsx)("div",{className:"calendar-modal-wrapper",children:(0,u.jsx)(o.ZP,{value:e.value,locale:e.lang,nextLabel:(0,u.jsx)(d.Djl,{className:"calendar-arrow"}),prevLabel:(0,u.jsx)(d.oTp,{className:"calendar-arrow"}),selectRange:!1,showDoubleView:a.innerWidth>768,showNavigation:!0,showNeighboringMonth:!1,showFixedNumberOfWeeks:!1,allowPartialRange:!1,tileClassName:t=>{let{date:a,view:s}=t;if(e.markDates)return i.filter((e=>!r.includes(e))).find((e=>e===c()(a).format("YYYY/MM/DD")))?"reserved_check-in":r.filter((e=>!i.includes(e))).find((e=>e===c()(a).format("YYYY/MM/DD")))?"reserved_check-out":p.concat(r.filter((e=>i.includes(e)))).find((e=>e===c()(a).format("YYYY/MM/DD")))?"reserved":void 0}})})})};var m=a(63);var h=a(5864),f=a(1595),v=a(5094),Y=a(6293);const g=function(e){const{sendRequest:t}=(0,n.x)(),[a,l]=(0,s.useState)(!1),[i,r]=(0,s.useState)(""),[o,d]=(0,s.useState)([]),[p,g]=(0,s.useState)([]),[x,w]=(0,s.useState)([]),[D,_]=(0,s.useState)(),[N,j]=(0,s.useState)(),[y,b]=(0,v.c)({start_date:{value:"",isValid:!1},end_date:{value:"",isValid:!0},price:{value:"",isValid:!1}},!1);return(0,s.useEffect)((()=>{(async()=>{try{const e=await t("https://monihomesbackend.onrender.com/api/getprices");d(e.prices[D].price),console.log(e.prices[D].price),j(e.prices[D]._id)}catch(e){}})()}),[t,a,D]),(0,s.useEffect)((()=>{w(function(e,t){let a=[],s=c()(new Date(e)),n=c()(new Date(t));for(;s<=n;)a.push(c()(new Date(s)).format("YYYY/MM/DD")),s=c()(new Date(s)).add(1,"days");return a}(y.inputs.start_date.value,y.inputs.end_date.value))}),[y.inputs.start_date.value,y.inputs.end_date.value]),(0,s.useEffect)((()=>{r(x.map((e=>({date:e,price:y.inputs.price.value}))))}),[y.inputs.price.value,x]),(0,s.useEffect)((()=>{const e=o.filter((e=>!x.includes(e.date)));g(e)}),[y.inputs.price.value,x]),(0,u.jsxs)("div",{className:"add_guest_wrapper",style:{margin:"20px"},children:[(0,u.jsxs)("div",{className:"price_add_wrapper",children:[(0,u.jsxs)("div",{className:"filter_room",children:[(0,u.jsx)("button",{className:0===D?"filter_btn active_filter_btn":"filter_btn",onClick:e=>_(0),children:"Moni Homes"}),(0,u.jsx)("button",{className:1===D?"filter_btn active_filter_btn":"filter_btn",onClick:e=>_(1),children:"Villa Masal"})]}),(0,u.jsx)("h3",{children:"Fiyat Kayd\u0131"}),(0,u.jsxs)("form",{className:"inputs_container",onSubmit:async e=>{e.preventDefault();const a=p.concat(i);console.log(a),l(!0),console.log(y.inputs.price.isValid);try{const e=await t("https://monihomesbackend.onrender.com/api/saveprices","POST",JSON.stringify({price:a,id:N}),{"Content-Type":"application/json"});console.log(e),l(!1)}catch(s){}},children:[(0,u.jsx)(h.Z,{id:"start_date",element:"input",type:"date",label:"Start",placeholder:"Start Date of price",validators:[(0,f.hg)()],onInput:b}),(0,u.jsx)(h.Z,{id:"end_date",element:"input",type:"date",label:"End",placeholder:"End Date of price",validators:[(0,f.hg)()],onInput:b}),(0,u.jsx)(h.Z,{id:"price",element:"input",type:"text",label:"Price",placeholder:"Write the price",validators:[(0,f.hg)()],onInput:b}),(0,u.jsx)("button",{type:"submit",className:"save_btn",style:{marginTop:"20px"},disabled:!y.inputs.price.isValid,children:a?(0,u.jsx)(m.Z,{}):"Save"})]})]}),(0,u.jsx)("div",{className:"availability__item_content",children:(0,u.jsx)(Y.Z,{guests:[],filter:0===D?"room":"villamasal"})})]})};const x=function(e){return(0,u.jsxs)("div",{className:"select_container",children:[(0,u.jsx)("p",{className:"select",onClick:e.showOptions,children:"room1"===e.room?"Room 1":"room2"===e.room?"Room 2":"room3"===e.room?"Room 3":"Villa Masal"}),(0,u.jsxs)("ul",{className:"options_container",style:e.options?{display:"flex"}:{display:"none"},children:[(0,u.jsx)("li",{onClick:e.onClick,id:"room1",className:"options_item",children:"Room 1"}),(0,u.jsx)("li",{onClick:e.onClick,id:"room2",className:"options_item",children:"Room 2"}),(0,u.jsx)("li",{onClick:e.onClick,id:"room3",className:"options_item",children:"Room 3"}),(0,u.jsx)("li",{onClick:e.onClick,id:"villamasal",className:"options_item",children:"Villa Masal"})]})]})};const w=function(e){const t=(0,s.useContext)(l.V),{sendRequest:a}=(0,n.x)(),[r,c]=(0,s.useState)(),[o,d]=(0,s.useState)([]),[m,h]=(0,s.useState)("room1"),[f,v]=(0,s.useState)(!1),[Y,w]=(0,s.useState)(""),[D,_]=(0,s.useState)([]),[N,j]=(0,s.useState)(2024),[y,b]=(0,s.useState)(""),[M,S]=(0,s.useState)(null);return(0,s.useEffect)((()=>{(async()=>{try{const e=await a("https://monihomesbackend.onrender.com/api/getdates");c(e.guests)}catch(e){}})()}),[a]),(0,s.useEffect)((()=>{(async()=>{try{const e=await a("https://monihomesbackend.onrender.com/api/google");S(e.data.items)}catch(e){}})()}),[a]),(0,s.useEffect)((()=>{d(r&&r.filter((e=>e.room===m)))}),[m,r]),(0,s.useEffect)((()=>{_(M&&M.filter((e=>e.summary.toLowerCase().includes(m))))}),[M,m]),(0,u.jsx)("div",{className:"user_container",children:(0,u.jsxs)("div",{className:"user_wrapper",children:[(0,u.jsx)("div",{className:"logout",children:(0,u.jsx)("button",{onClick:t.logout,children:"\xc7\u0131k\u0131\u015f"})}),(0,u.jsxs)("div",{className:"user_btns_container",children:[(0,u.jsx)("button",{onClick:()=>b("customer"),className:"user_btn",children:"M\xfc\u015fteri Kayd\u0131"}),(0,u.jsx)("button",{onClick:()=>b("price"),className:"user_btn",children:"Fiyat Kayd\u0131"})]}),"price"===y&&(0,u.jsx)(g,{}),"customer"===y&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"select_room_wrapper",children:(0,u.jsx)(x,{onClick:e=>{h(e.target.id),v(!1)},room:m,showOptions:()=>v(!f),options:f})}),(0,u.jsx)(p,{markDates:o,events:D}),(0,u.jsx)(i.Z,{data:D.sort(((e,t)=>new Date(t.start.date)-new Date(e.start.date))),onDelete:e=>{e.preventDefault(),e.stopPropagation()},onChange:e=>{w(e.target.value)},onChangeYear:e=>{j(e.target.value)},years:N,value:Y,filter:m,clearFilter:()=>w("")})]})]})})}},5097:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(2791),n=a(9126),l=a(184);const i=function(e){const[t,a]=(0,s.useState)(""),[i,r]=(0,s.useState)(!1);return(0,l.jsxs)("div",{className:"guest_table",children:[(0,l.jsxs)("div",{className:"guest_table_header",children:[(0,l.jsx)("p",{children:"No"}),(0,l.jsx)("p",{children:"Room Number"}),(0,l.jsx)("p",{children:"Check-in"}),(0,l.jsx)("p",{children:"Check-out"}),(0,l.jsx)("p",{className:"\r ",onClick:()=>r(!i),children:(0,l.jsx)(n.r0X,{})})]}),e.data&&e.data.map(((s,n)=>(0,l.jsx)("div",{className:"guest_table_",children:(0,l.jsxs)("div",{className:"guest_table_item",onClick:()=>{var e;a((e=n)===t?"":e)},style:t===n?{background:"#226450cf",color:"#fff"}:null,children:[(0,l.jsx)("p",{className:"guest_table_item_title",children:n+1}),(0,l.jsxs)("p",{className:"guest_table_item_title",children:[" ","room1"===e.filter?"Room 1":"room2"===e.filter?"Room 2":"room3"===e.filter?"Room 3":"Villa Masal"]}),(0,l.jsx)("p",{className:"guest_table_item_title",children:s.start.date}),(0,l.jsx)("p",{className:"guest_table_item_title",children:s.end.date})]})},s.id)))]})}},6896:()=>{}}]);
//# sourceMappingURL=292.899e48af.chunk.js.map